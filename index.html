<!DOCTYPE html>
<html lang="en">
<head>
    <title>The A-Maze-Ing Maze</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="./css/style.css" />
</head>
<body>
    <script src="./js/jquery-3.1.1.min.js"></script>   
    <script src="./js/Three58.js"></script>
    <script src="./js/three.js"></script>
    <script src="./js/SubdivisionModifier.js"></script>
    <script src="./js/PointerLockControls.js"></script>
    <script src="./js/THREEx.FullScreen.js"></script>
    <script src="./js/mazemap/Cell.js"></script>
    <script id="vertexShader" type="x-shader/x-vertex">
        uniform vec3 viewVector;
        uniform float c;
        uniform float p;
        varying float intensity;
        void main()
        {
            vec3 vNormal = normalize( normalMatrix * normal );
                vec3 vNormel = normalize( normalMatrix * viewVector );
                intensity = pow( c - dot(vNormal, vNormel), p );

            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
    </script>
    <script id="fragmentShader" type="x-shader/x-vertex">
        uniform vec3 glowColor;
        varying float intensity;
        void main()
        {
                vec3 glow = glowColor * intensity;
            gl_FragColor = vec4( glow, 1.0 );
        }
    </script>

    <span id="timer-container">
            Time: <span id="minutes">00</span>:<span id="seconds">00</span>
    </span>
    <div id="blocker">
        <span class="glyphicon glyphicon-pause" id="pauseIcon"> </span>
        <div id="splashscreen"><img src="./images/logo.png" width="602" height="375"/>
		<div id="seed"><h2>Seed</h2>
            <input type="text" id="SeedNumber" value="3921"><br><br>
            <button type="button" id="Submit">Submit seed</button>
             <button type="button" id="Random">Random seed</button></div><br>
                    <input type='radio' id='RPGMODE' name='modes' checked/> RPG mode
        <input type='radio' id='FUNKYMODE' name='modes'/> FUNKY mode <br>
			 Controls:<br>
                    W, A, S, D = Move<br>
                    SPACE = Jump<br>
                    MOUSE = Look around<br>
            F = Enter Fullscreen Mode<br>
        </div>
        <div id ="pause">
            <span style="font-size: 40px">Game Paused</span>
            <br>
            Click to continue
        </div>
        <div id="end">
		<img src="./images/logo.png" width="402" height="250"/><br/>
		<div id="content">
		<span style="font-size: 40px">Game Completed</span>
		<div id="yourSeed"></div><br>
		<div id="finalTime"></div><br><br>
		<span>Give the seed to your friends and see who is faster!</span><br><br>
        <button type="button" id="refresh">Play Again</button><br><br>
    </div></div>
    </div>
	<script src="./js/stats.min.js"></script>
    <script src="./js/movement.js"></script>
    <script src="./js/audio.js"></script>
    <audio loop id="audio0">
         <source src="./mp3/press_start.mp3" type="audio/mpeg">
         Your browser does not support the audio element.
    </audio>
	<audio loop id="audio1">
         <source src="./mp3/level1.mp3" type="audio/mpeg">
         Your browser does not support the audio element.
    </audio>
    <audio loop id="audio2">
         <source src="./mp3/level2.mp3" type="audio/mpeg">
         Your browser does not support the audio element.
    </audio>
	<audio loop id="audio3">
         <source src="./mp3/level3.mp3" type="audio/mpeg">
         Your browser does not support the audio element.
    </audio>
    <script>
		var size = 10;
        var seed = 0;
        var gamemode = 0;
        $("#Submit").on('click',function()
        {
            if ($("#RPGMODE").is(":checked"))
            {
                gamemode = 1;
            }
            var seednumber = document.getElementById("SeedNumber").value;
            if(seednumber != "" && $.isNumeric(seednumber))
            {
                seed = Math.round(seednumber);
            }
            else
            { 
                seed = Math.round(Math.random() * 1000);
            }
            console.log(seed);
            $("body").fadeToggle(100, "linear");
            hideSplashScreen();
            $.getScript("./js/mazemap/mazegenerator.js", function(){GenerateMaze(seed, size);});
            $.getScript("./js/game.js", function(){init(1);});
        });
        $("#Random").on('click',function()
        {
            if ($("#RPGMODE").is(":checked"))
            {
                gamemode = 1;
            } 
			seed = Math.round(Math.random() * 1000);
			console.log(seed);
			$("body").fadeToggle(100, "linear");
			hideSplashScreen();
            $.getScript("./js/mazemap/mazegenerator.js", function(){GenerateMaze(seed, size);});
            $.getScript("./js/game.js", function(){init(1);});
        });
        $("#refresh").on('click', function(){
            history.go(0);
        });
    </script>
</body>
</html>